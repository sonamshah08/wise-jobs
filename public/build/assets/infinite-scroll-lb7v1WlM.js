document.addEventListener("DOMContentLoaded",(function(){window.page=2,window.hasMorePages=!0,window.filters={};let e=!1;const n=document.getElementById("job-list"),t=document.getElementById("loading");window.addEventListener("scroll",(function(){const{scrollTop:o,scrollHeight:s,clientHeight:d}=document.documentElement;o+d>=s-50&&function(){if(e||!window.hasMorePages)return;e=!0,t.style.display="block";const o=new URLSearchParams;o.append("page",window.page),Object.entries(window.filters).forEach((([e,n])=>{n&&o.append(e,n)})),fetch("/jobs?"+o.toString(),{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((e=>e.json())).then((o=>{o.html?(n.insertAdjacentHTML("beforeend",o.html),window.hasMorePages=!!o.next_page,window.page++):window.hasMorePages=!1,t.style.display="none",e=!1})).catch((n=>{console.error("Error loading more jobs:",n),t.style.display="none",e=!1}))}()}))}));
